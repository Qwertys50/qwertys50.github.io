<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="circle.css">
    <link rel="stylesheet" href="card.css">

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <title>Document</title>
</head>
<body>
    
    <header>
        <div class="container"></div>
        <div class="origin_text">My Projects</div>

        <div class="area">
            <ul class="circles">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
            </ul>
        </div>
    </header>

    <main>

        <div class="cardBox notranslate">
            <div class="card">
                <div class="viewed" style="background-image: url(images/background-roblox-studio.png);">
                    <h2>ROBLOX STUDIO</h2>
                </div>
                <div class="content">
                    <div class="slider-container notranslate">
                        <div class="slider" active="roblox">
                            <div class="info active" id_places="121504797323109">

                                <div class="place-card">
                                    <div class="place-image"></div>
                                    <div class="place-info">
                                        <div class="place-name">
                                            <a href="https://roblox.com/games/"></a>
                                        </div>
                                        <div class="place-creator"></div>
                                        <div class="place-stats">
                                            <div class="online-count">
                                                <span class="stat-icon">👥</span>
                                                <span>0</span>
                                            </div>
                                            <div class="favorite-count">
                                                <div class="favorite-count_img"></div>
                                                <span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            
                            <div class="info" id_places="130955646755840">

                                <div class="place-card">
                                    <div class="place-image"></div>
                                    <div class="place-info">
                                        <div class="place-name">
                                            <a href="https://roblox.com/games/"></a>
                                        </div>
                                        <div class="place-creator"></div>
                                        <div class="place-stats">
                                            <div class="online-count">
                                                <span class="stat-icon">👥</span>
                                                <span>0</span>
                                            </div>
                                            <div class="favorite-count">
                                                <div class="favorite-count_img"></div>
                                                <span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="button_slider">
                            <button id="prevBtn">Prev</button>
                            <button id="nextBtn">Next</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="cardBox notranslate">
            <div class="card">
                <div class="viewed" style="background-image: url(images/hikka.jpg);">
                    <h2 class="notranslate">PYTHON — HIKKA</h2>
                </div>
                <div class="content">
                    <div class="telegram-card">
                        <div class="telegram-card__icon"></div>
                        <div class="telegram-card__content">
                            <div class="telegram-card__title">TELEGRAM</div>
                            <a href="https://t.me/modules_qwertys" class="telegram-card__link">Hikka Modules Qwertyss</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

</body>
<script src="js/container.js"></script>
<script src="js/slider.js"></script>
<script>
// Функция для обработки одного блока игры
async function processGameBlock(gameBlock) {
    const placeId = gameBlock.getAttribute('id_places');
    let universeId = 0;
    let imageURL = "";
    let info_game = {};

    try {
        const universeResponse = await axios({
            url: `https://apis.roproxy.com/universes/v1/places/${placeId}/universe`,
            method: 'GET'
        });
        
        if (universeResponse.data.universeId) {
            universeId = universeResponse.data.universeId;
            
            const gameInfoResponse = await axios({
                url: `https://games.roproxy.com/v1/games?universeIds=${universeId}`,
                method: 'GET'
            });
            
            if (gameInfoResponse.data.data && gameInfoResponse.data.data[0]) {
                info_game = gameInfoResponse.data.data[0];
                
                const imageResponse = await axios({
                    url: `https://thumbnails.roproxy.com/v1/games/icons?universeIds=${universeId}&returnPolicy=PlaceHolder&size=256x256&format=Png&isCircular=false`,
                    method: 'GET'
                });
                
                if (imageResponse.data.data && imageResponse.data.data[0].imageUrl) {
                    imageURL = imageResponse.data.data[0].imageUrl;
                    
                    updateGameBlock(gameBlock, info_game, imageURL);
                }
            }
        }
    } catch (error) {
        console.error(`Error processing game block ${placeId}:`, error);
    }
}

function updateGameBlock(gameBlock, gameInfo, imageUrl) {

    const imageElement = gameBlock.querySelector('.place-image');
    if (imageElement) {
        imageElement.style.backgroundImage = `url('${imageUrl}')`;
    }
    

    const nameElement = gameBlock.querySelector('.place-name a');
    if (nameElement && gameInfo.name) {
        nameElement.textContent = gameInfo.name;
    }
    

    const creatorElement = gameBlock.querySelector('.place-creator');
    if (creatorElement && gameInfo.creator) {
        creatorElement.textContent = gameInfo.creator.name || "Unknown Creator";
    }
    

    const onlineCountElement = gameBlock.querySelector('.online-count span:last-child');
    if (onlineCountElement && gameInfo.playing) {
        onlineCountElement.textContent = gameInfo.playing;
    }
    

    const favoriteCountElement = gameBlock.querySelector('.favorite-count span');
    if (favoriteCountElement && gameInfo.favoritedCount) {
        favoriteCountElement.textContent = gameInfo.favoritedCount;
    }
}


document.addEventListener('DOMContentLoaded', () => {
    const gameBlocks = document.querySelector('[active="roblox"]').querySelectorAll('.info[id_places]');
    gameBlocks.forEach(block => {

        console.log(block)
        processGameBlock(block);
    });
});

</script>

</html>